(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2673:function(e,t,o){Promise.resolve().then(o.bind(o,3129))},3129:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return r}});var s=o(7437),n=o(2265),l=e=>{let{onFetchRecommendations:t}=e,[o,l]=(0,n.useState)(""),[a,i]=(0,n.useState)("");return(0,s.jsx)("div",{className:"flex items-center justify-center ",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s={};o&&(s.genre=o),a&&(s.author=a),t(s)},className:"mb-4 p-4 border rounded shadow w-full max-w-md bg-slate-700",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-center text-white",children:"Get Book Recommendations"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-2 font-semibold text-xl text-white",children:"Genre"}),(0,s.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),className:"border rounded w-full p-2",placeholder:"Enter genre"})]}),(0,s.jsxs)("div",{className:"mt-4 ",children:[(0,s.jsx)("label",{className:"block mb-2 font-semibold text-xl text-white",children:"Author"}),(0,s.jsx)("input",{type:"text",value:a,onChange:e=>i(e.target.value),className:"border rounded w-full p-2",placeholder:"Enter author"})]}),(0,s.jsx)("button",{type:"submit",className:"mt-4 bg-blue-500 text-white rounded px-4 py-2 w-full",children:"Get Recommendations"})]})})},a=e=>{let{books:t,onBookUpdate:o,onBookDelete:n}=e;return(0,s.jsx)("ul",{children:t.map(e=>(0,s.jsxs)("li",{className:"mb-4 border p-4 rounded shadow bg-slate-200",children:[(0,s.jsx)("h3",{className:"text-lg font-bold",children:e.title}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Author:"})," ",e.author]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Genre:"})," ",e.genre]}),(0,s.jsx)("p",{children:e.description}),(0,s.jsx)("button",{onClick:()=>o(e),className:"m-2  bg-blue-500 text-white rounded px-2",children:"Update"}),(0,s.jsx)("button",{onClick:()=>n(e._id),className:"m-2 float-right bg-red-500 text-white rounded px-2",children:"Delete"})]},e._id))})},i=o(6463);function r(){let[e,t]=(0,n.useState)([]),[o,r]=(0,n.useState)([]),[c,d]=(0,n.useState)(1),[u,h]=(0,n.useState)(1),[m,x]=(0,n.useState)(0),[b,p]=(0,n.useState)(0),[f]=(0,n.useState)(5),g=(0,i.useRouter)(),j=async e=>{let o=await fetch("https://book-app-api-iuv4.onrender.com/api/recommendations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(o.ok){let e=await o.json();t(e.recommendations),x(e.totalBooks)}else console.log("No recommendations found")},k=e=>{g.push("/updateBook/".concat(e._id))},N=async o=>{(await fetch("https://book-app-api-iuv4.onrender.com/api/books/".concat(o),{method:"DELETE"})).ok?(t(e.filter(e=>e._id!==o)),console.log("Book deleted successfully!")):console.log("Failed to delete book")},y=async()=>{let e=await fetch("https://book-app-api-iuv4.onrender.com/api/books/random?page=".concat(u,"&limit=").concat(f));if(e.ok){let t=await e.json();r(t.randomBooks),p(t.totalBooks)}else console.log("Failed to fetch random books")};return(0,n.useEffect)(()=>{j({genre:"fiction"})},[c]),(0,n.useEffect)(()=>{y()},[u]),(0,s.jsxs)("div",{className:"mx-auto p-4 min-h-screen bg-[url('https://assets.architecturaldigest.in/photos/624c2654cf7483eb90e638d6/4:3/w_1440,h_1080,c_limit/Books-1.jpg')] w-full",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-center text-white",children:"Personalized Book Recommendation App"}),(0,s.jsx)("div",{className:"mt-7",children:(0,s.jsx)(l,{onFetchRecommendations:j})}),(0,s.jsx)("button",{className:"btn bg-red-100 text-black font-bold p-3 rounded-lg",onClick:()=>{g.push("/addBook")},children:"Add your book"}),e.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-center mt-6 text-white",children:"Book Recommendations"}),(0,s.jsx)(a,{books:e,onBookUpdate:k,onBookDelete:N}),(0,s.jsxs)("div",{className:"flex justify-center items-center mt-4",children:[(0,s.jsx)("button",{onClick:()=>{c>1&&d(e=>e-1)},disabled:1===c,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg mr-2 disabled:opacity-50",children:"Previous"}),(0,s.jsx)("button",{onClick:()=>{c<Math.ceil(m/f)&&d(e=>e+1)},disabled:c>=Math.ceil(m/f),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg disabled:opacity-50",children:"Next"})]})]}),o.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-4xl font-bold text-center mt-6 mb-6 text-white",children:"Random Books"}),(0,s.jsx)(a,{books:o,onBookUpdate:k,onBookDelete:N}),(0,s.jsxs)("div",{className:"flex justify-center items-center mt-4",children:[(0,s.jsx)("button",{onClick:()=>{u>1&&h(e=>e-1)},disabled:1===u,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg mr-2 disabled:opacity-50",children:"Previous"}),(0,s.jsx)("button",{onClick:()=>{u<Math.ceil(b/f)&&h(e=>e+1)},disabled:u>=Math.ceil(b/f),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg disabled:opacity-50",children:"Next"})]})]}),0===o.length&&(0,s.jsx)("p",{className:"text-center text-white",children:"No random books available"})]})}},6463:function(e,t,o){"use strict";var s=o(1169);o.o(s,"useRouter")&&o.d(t,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=2673)}),_N_E=e.O()}]);